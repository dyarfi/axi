<?php defined('SYSPATH') OR die('No direct access allowed.'); ?><h2><?php echo $module_menu; ?></h2><div class="ls10"></div><div class="bar"></div><div class="ls10"></div><?php echo Form::open(ADMIN.$class_name.'/'.$action.'/'.$param, array(																'enctype' => 'multipart/form-data', 																'method' => 'post', 																'class' => 'general autovalid form_details',																'id' => ''																));?>	<div class="">		<div class="form_row">			<?php echo Form::label('title','Title'); ?>			<?php echo Form::input('title', $fields['title'],array('id'=>'title', 'class'=>'required')); ?>            <?php echo sprintf($errors['title'], 'Title'); ?>        </div>				<div class="form_row">			<?php echo Form::label('name','Name'); ?>			<?php echo Form::input('name', $fields['name'],array('id'=>'name', 'class'=>'required')); ?>            <?php echo sprintf($errors['name'], 'Name'); ?>        </div>                <div class="form_row">			<?php echo Form::label('description','Description'); ?>			<?php echo Form::textarea('description', $fields['description'], array('class'=>'ckeditor','id'=>'description'),TRUE);?>            			<?php echo sprintf($errors['description'], 'Description'); ?>        </div>				<?php if ($fields['is_system']) { ?>			<?php if (isset($show_url) && $show_url) { ?>			<div class="form_row">				<?php echo Form::label('url','URL :'); ?>				<?php echo Form::input('url', $fields['url'],array('id'=>'url', 'class'=>'')); ?>				<?php echo sprintf($errors['url'], 'URL'); ?>			</div>			<?php } ?>			<?php if (isset($show_media) && $show_media) { ?>			<div class="form_row">				<div class="hidden_input"><?php echo Form::label('media','Media :'); ?>					<span><?php echo htmlspecialchars($fields['media']); ?> |											<?php if (!empty($fields['media'])) { ?>						<strong>Delete </strong><input type="checkbox" name="media_clear" id="media_clear" class="media_clear" value="1" />					  <?php } ?>									</span>					<input type="hidden" name="media" id="media" class="input_media" value="<?php echo htmlspecialchars($fields['media']); ?>" />			</div>				<div id="media_library" class="input-append">					<?php echo Form::input('_media', $fields['media'],array('id'=>'fileName', 'class'=>'input_media')); ?>					<a href="<?php echo Lib::config('admin')->filemanager_path.'&amp;type=2&amp;fldr=/media_files';?>" class="btn iframe-btn" type="button">Select</a>				</div>				<?php echo sprintf($errors['media'], 'Media'); ?>			</div>			<?php } ?>		<?php } ?>		        <?php if (isset($show_menu_upload) && $show_menu_upload) : ?>        <?php foreach ($uploads as $row_name => $row_params) : ?>            <fieldset style="clear:both;">                <legend><strong><?php echo $row_params['label']; ?></strong></legend>                <?php if (isset($files[$row_name])) : ?>                <div class="form_row">                    <label><?php echo $row_params['label']; ?></label>                    <div class="form_fields">                        <?php if (is_file(Lib::config($module_name.'.menu_upload_path').$files[$row_name]->file_name) && in_array($files[$row_name]->file_type, $readable_mime)) : ?>                        <div id="file_<?php echo $files[$row_name]->id; ?>">                            <?php if (substr($files[$row_name]->file_type, 0, strlen('image/')) == 'image/') : ?>                            <?php                                $file_data	= pathinfo(URL::site().Lib::config($module_name.'.menu_upload_url').$files[$row_name]->file_name);                                $thumb_ext	= isset($row_params['image_manipulation']['thumbnails'][0]) ? '_resize_'.$row_params['image_manipulation']['thumbnails'][0] : '';                            ?>                            <img src="<?php echo URL::site().Lib::config($module_name.'.menu_upload_url').$file_data['filename'].$thumb_ext.'.'.$file_data['extension']; ?>" alt="<?php echo URL::site().Lib::config($module_name.'.menu_upload_url').$files[$row_name]->file_name; ?>" />                            <?php elseif (substr($files[$row_name]->file_type, 0, strlen('audio/')) == 'audio/') : ?>                            <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="320" height="20" id="FLVPlayer">                                <param name="movie" value="<?php echo ASSETS;?>flash/singlemp3player.swf" />                                            <param name="quality" value="high" />                                <param name="wmode" value="opaque" />                                <param name="scale" value="noscale" />                                <param name="salign" value="lt" />                                <param name="FlashVars" value="file=<?php echo URL::site(ADMIN.$class_name.'/download/'.$files[$row_name]->file_name); ?>&amp;backColor=c2c2c2&amp;frontColor=666666&amp;showDownload=false&amp;repeatPlay=false&songVolume=100" />                                <param name="swfversion" value="8,0,0,0" />                                <!-- This param tag prompts users with Flash Player 6.0 r65 and higher to download the latest version of Flash Player. Delete it if you don�t want users to see the prompt. -->                                <param name="expressinstall" value="Scripts/expressInstall.swf" />                                <!-- Next object tag is for non-IE browsers. So hide it from IE using IECC. -->                                            <!--[if !IE]>-->                                <object type="application/x-shockwave-flash" data="<?php echo ASSETS;?>flash/singlemp3player.swf" width="320" height="20">                                <!--<![endif]-->                                    <param name="quality" value="high" />                                    <param name="wmode" value="opaque" />                                    <param name="scale" value="noscale" />                                    <param name="salign" value="lt" />                                    <param name="FlashVars" value="file=<?php echo URL::site(ADMIN.$class_name.'/download/'.$files[$row_name]->file_name); ?>&amp;backColor=c2c2c2&amp;frontColor=666666&amp;showDownload=false&amp;repeatPlay=false&songVolume=100" />                                    <param name="swfversion" value="8,0,0,0" />                                                <param name="expressinstall" value="Scripts/expressInstall.swf" />                                    <!-- The browser displays the following alternative content for users with Flash Player 6.0 and older. -->                                    <div>                                    <h4>Content on this page requires a newer version of Adobe Flash Player.</h4>                                    <p><a href="http://www.adobe.com/go/getflashplayer"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" /></a></p>                                    </div>                                <!--[if !IE]>-->                                </object>                                            <!--<![endif]-->                            </object>                            <?php else : ?>                            <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="320" height="240" id="FLVPlayer">                                <param name="movie" value="<?php echo ASSETS;?>flash/FLVPlayer_Progressive.swf" />                                            <param name="quality" value="high" />                                <param name="wmode" value="opaque" />                                <param name="scale" value="noscale" />                                <param name="salign" value="lt" />                                <param name="FlashVars" value="skinName=<?php echo ASSETS;?>flash/Corona_Skin_2&amp;streamName=<?php echo URL::site(ADMIN.$class_name.'/download/'.$files[$row_name]->file_name); ?>&amp;autoPlay=false&amp;autoRewind=false" />                                <param name="swfversion" value="8,0,0,0" />                                <!-- This param tag prompts users with Flash Player 6.0 r65 and higher to download the latest version of Flash Player. Delete it if you don�t want users to see the prompt. -->                                <param name="expressinstall" value="Scripts/expressInstall.swf" />                                <!-- Next object tag is for non-IE browsers. So hide it from IE using IECC. -->                                            <!--[if !IE]>-->                                <object type="application/x-shockwave-flash" data="<?php echo ASSETS;?>flash/FLVPlayer_Progressive.swf" width="320" height="240">                                <!--<![endif]-->                                    <param name="quality" value="high" />                                    <param name="wmode" value="opaque" />                                    <param name="scale" value="noscale" />                                    <param name="salign" value="lt" />                                    <param name="FlashVars" value="skinName=<?php echo ASSETS;?>flash/Corona_Skin_2&amp;streamName=<?php echo URL::site(ADMIN.$class_name.'/download/'.$files[$row_name]->file_name); ?>&amp;autoPlay=false&amp;autoRewind=false" />                                    <param name="swfversion" value="8,0,0,0" />                                                <param name="expressinstall" value="Scripts/expressInstall.swf" />                                    <!-- The browser displays the following alternative content for users with Flash Player 6.0 and older. -->                                    <div>                                    <h4>Content on this page requires a newer version of Adobe Flash Player.</h4>                                    <p><a href="http://www.adobe.com/go/getflashplayer"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" /></a></p>                                    </div>                                <!--[if !IE]>-->                                </object>                                            <!--<![endif]-->                            </object>                            <?php endif; ?>                        </div>                        <?php else: ?>                        Cannot preview this file                        <?php endif; ?>                    </div>                </div>                           <div class="form_row">                    <!--label class="no_border">&nbsp;</label-->                    <div class="form_field"><a href="<?php echo URL::site(ADMIN.$class_name.'/download/'.$files[$row_name]->file_name); ?>"><img src="<?php echo IMG; ?>admin/disk.png" alt="<?php echo $files[$row_name]->file_name; ?>" /></a></div>                </div>                            <?php echo sprintf($errors[$row_name], $row_params['label']); ?>                <div class="form_row">                    <label for="<?php echo $row_name; ?>">Replace <?php echo $row_params['label']; ?></label>                    <input type="file" name="<?php echo $row_name; ?>" id="<?php echo $row_name; ?>" />                    <?php if (isset($row_params['note']) && $row_params['note'] != '') : ?>                        <div class="form_row">                            <label>&nbsp;</label>                            <?php echo htmlspecialchars($row_params['note'], ENT_QUOTES); ?>                        </div>                    <?php endif; ?>                </div>                            <?php if (isset($row_params['caption']) && $row_params['caption']) : ?>                <div class="form_row">                    <label for="<?php echo $row_name.'_caption'; ?>">Caption</label>                    <input type="text" name="<?php echo $row_name.'_caption'; ?>" id="<?php echo $row_name.'_caption'; ?>" value="<?php echo $fields[$row_name.'_caption']; ?>" />                </div>                <?php endif; ?>                            <?php if (isset($row_params['optional']) && $row_params['optional']) : ?>                <div class="form_row">                    <label for="delete_<?php echo $row_name; ?>">Delete <?php echo $row_params['label']; ?>?</label>                    <input type="checkbox" name="delete_<?php echo $row_name; ?>" id="delete_<?php echo $row_name; ?>" value="1" />                    <label for="delete_<?php echo $row_name; ?>" class="sub_label">Yes, delete this <?php echo $row_params['label']; ?></label>                </div>                <?php endif; ?>                            <?php else : ?>                            <?php echo sprintf($errors[$row_name], $row_params['label']); ?>                <div class="form_row">                    <label for="<?php echo $row_name; ?>"><?php echo $row_params['label']; ?></label>                    <input type="file" name="<?php echo $row_name; ?>" id="<?php echo $row_name; ?>" />                    <?php if (isset($row_params['note']) && $row_params['note'] != '') : ?>                        <div class="form_row">                            <label>&nbsp;</label>                            <?php echo htmlspecialchars($row_params['note'], ENT_QUOTES); ?>                        </div>                    <?php endif; ?>                </div>                            <?php if (isset($row_params['caption']) && $row_params['caption']) : ?>                <div class="form_row">                    <label for="<?php echo $row_name.'_caption'; ?>">Caption</label>                    <input type="text" name="<?php echo $row_name.'_caption'; ?>" id="<?php echo $row_name.'_caption'; ?>" value="<?php echo $fields[$row_name.'_caption']; ?>" />                </div>                <?php endif; ?>                            <?php endif; ?>        	</fieldset>            <?php endforeach; ?>        <?php endif; ?>        <?php if (isset($show_position) && $show_position) : ?>        <?php echo sprintf($errors['position'], 'Position'); ?>        <div class="form_row">            <label for="position">Position</label>            <select name="position" id="position" class="required">                <option value="0">&nbsp;</option>                <?php foreach ($position as $row => $value) : ?>                <option value="<?php echo $row; ?>" <?php echo ($fields['position'] == $row) ? 'selected="selected"' : ''; ?>><?php echo HTML::chars(ucfirst($value), TRUE); ?></option>                <?php endforeach; ?>            </select>        </div>    	<?php endif; ?>        <?php echo sprintf($errors['status'], 'Status'); ?>        <div class="form_row">            <label for="status">Status</label>            <select name="status" id="status" class="required">                <option value="">&nbsp;</option>                <?php foreach ($statuses as $row) : ?>                <option value="<?php echo $row; ?>" <?php echo ($fields['status'] == $row) ? 'selected="selected"' : ''; ?>><?php echo HTML::chars(ucfirst($row), TRUE); ?></option>                <?php endforeach; ?>            </select>        </div>		<?php if ($action == 'add') { ?>        		<div class="form_row">            <label for="add_another">&nbsp;</label>            <input type="checkbox" name="add_another" id="add_another" value="TRUE" /> <label for="add_another" class="sub_label">Add another <?php echo ucwords(str_replace('_', ' ', $class_name)); ?></label>        </div>		<?php } ?>	</div>	<div class="ls10 clearfix"></div>	<div class="bar"></div>	<div class="ls10"></div>	<div class="form_row">				<?php echo Form::submit('submit', strtoupper($action), array('class' => 'btn btn-sm btn-primary')); ?>	</div>	<?php echo Form::close();?><?php if ($show_menu_upload) { ?><script type="text/javascript">$(document).ready(function() {	<?php 	$i = 1;	foreach ($uploads as $pref => $val) { ?>		$('#<?php echo $pref;?>').on('change',function(){			var ext<?php echo $i;?> = $(this).val().split('.').pop().toLowerCase();			if($.inArray(ext<?php echo $i;?>, <?=json_encode((array)explode(',', $val['file_type']));?>) === -1) {				jAlert('Invalid file type (<?=$val['file_type'];?>)', 'Error');				$(this).val('');			}		});			<?php 	$i++;	} 	?>});</script><?php } ?>